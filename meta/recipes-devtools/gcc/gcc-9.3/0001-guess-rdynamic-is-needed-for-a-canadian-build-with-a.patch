From aa04699d1ce672e7355d6421c43421def9a5cb67 Mon Sep 17 00:00:00 2001
From: Jeroen Hofstee <jhofstee@victronenergy.com>
Date: Sun, 24 Apr 2022 18:49:07 +0200
Subject: [PATCH 1/3] guess -rdynamic is needed for a canadian build with a
 linux host

https://bugzilla.yoctoproject.org/show_bug.cgi?id=14681
---
 config/gcc-plugin.m4 | 11 ++++++++++-
 1 file changed, 10 insertions(+), 1 deletion(-)

diff --git a/config/gcc-plugin.m4 b/config/gcc-plugin.m4
index 8f2787191..966d4c14e 100644
--- a/config/gcc-plugin.m4
+++ b/config/gcc-plugin.m4
@@ -77,7 +77,16 @@ AC_DEFUN([GCC_ENABLE_PLUGINS],
 	 AC_MSG_RESULT([$plugin_rdynamic])
        fi
      else
-       AC_MSG_RESULT([unable to check])
+       case "${host}" in
+         *-*-linux*)
+           AC_MSG_RESULT([unable to check, guessing -rdynamic is needed])
+           plugin_rdynamic=yes
+           pluginlibs="-rdynamic"
+         ;;
+         *)
+           AC_MSG_RESULT([unable to check])
+         ;;
+       esac
      fi
 
      # Check -ldl
-- 
2.25.1

